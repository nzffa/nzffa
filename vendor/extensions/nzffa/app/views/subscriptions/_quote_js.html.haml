:javascript
  if ($new_form = $('form.new_subscription')) {
    $new_form.change(function(){
      $.post('/subscriptions/quote_new', $new_form.toJSON(), function(response){
        $('span#price').text(response.price)
        $('span#credit_card_fee').text(response.credit_card_fee)
        $('span#begins_on').text(response.begins_on)
        $('span#expires_on').text(response.expires_on)
      })
    })
  }

  if ($upgrade_form = $('form.edit_subscription')) {
    $upgrade_form.change(function(){
      $.post('/subscriptions/quote_upgrade', $upgrade_form.toJSON(), function(response){
        $('span#price').text(response.price)
        $('span#credit_card_fee').text(response.credit_card_fee)
        $('span#credit').text(response.credit)
        $('span#upgrade_price').text(response.upgrade_price)
        $('span#begins_on').text(response.begins_on)
        $('span#expires_on').text(response.expires_on)
      })
    })
  }

  toggle_research_fund_contribution = function() {
    if ($(this).prop('checked')){
      $('#research_fund_contribution input').removeAttr('disabled');
      $('#research_fund_contribution').show();
    }else{
      $('#research_fund_contribution input').attr('disabled','disabled');
      $('#research_fund_contribution').hide();
    }
  }
  $('#subscription_contribute_to_research_fund').change(toggle_research_fund_contribution);
  $('#subscription_contribute_to_research_fund').trigger('change')

  toggle_tgm_delivery_radios = function(){
    if ($(this).prop('checked')){
      $('#tree_grower_delivery_location input').removeAttr('disabled');
      $('#tree_grower_delivery_location').show();
    }else{
      $('#tree_grower_delivery_location input').attr('disabled','disabled');
      $('#tree_grower_delivery_location').hide();
    }
  }
  $('#subscription_receive_tree_grower_magazine').change(toggle_tgm_delivery_radios);
  $('#subscription_receive_tree_grower_magazine').trigger('change')

  $('#subscription_additional_branch_ids').select2()
